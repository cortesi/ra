# ra configuration file
# See https://github.com/cortesi/ra for documentation

# Stop here - ignore parent directories and global config
# root = true

# Knowledge trees - directories containing documents to index.
# Each tree has a name, path, and file patterns.
[tree.docs]
path = "./docs"
include = ["**/*.md"]
exclude = ["**/drafts/**"]

# General settings (showing defaults)
[settings]
default_limit = 5          # results per query
local_boost = 1.5          # relevance boost for local trees
chunk_at_headings = true   # split documents at heading boundaries
max_chunk_size = 50000     # warning threshold for large chunks

# Search settings
[search]
stemmer = "english"        # stemming language for search
fuzzy_distance = 1         # fuzzy matching (0 = off, 1-2 = Levenshtein distance)
limit = 10                 # final results after aggregation
max_candidates = 50        # candidates passed into aggregation phase
cutoff_ratio = 0.3         # score ratio threshold for elbow cutoff (0.0-1.0)
aggregation_threshold = 0.5  # sibling ratio for hierarchical aggregation

# Index field boosts - control how matches in different fields affect score
boost_hierarchy = 3.0      # matches in document headings
boost_path = 8.0           # matches in file path/name
boost_tags = 5.0           # matches in frontmatter tags
boost_body = 1.0           # matches in document body

# Heading depth boost - prioritize top-level sections
boost_heading_max = 5.0    # max boost for document/h1
boost_heading_decay = 0.7  # decay factor per level (h2 = max*0.7, h3 = max*0.7Â², ...)

# Markdown parser weights - term weighting for context extraction
markdown_h1 = 3.0          # weight for H1 heading terms
markdown_h2_h3 = 2.0       # weight for H2-H3 heading terms
markdown_h4_h6 = 1.5       # weight for H4-H6 heading terms
markdown_body = 1.0        # weight for body text terms

# Context command settings - controls how `ra context` finds relevant docs
[context]
terms = 50                 # max terms in query (higher = more diverse results)
min_word_length = 4        # skip tokens shorter than this
sample_size = 50000        # bytes to sample from large files

# Context rules - customize search behavior based on file patterns.
# When `ra context` analyzes a file, matching rules modify the search:
# - `match`: glob pattern(s) to match file paths (string or array)
# - `trees`: limit search to specific trees (optional)
# - `terms`: additional search terms to inject (optional)
# - `include`: files to always include in results, as "tree:path" (optional)

# [[context.rules]]
# match = "*.rs"
# terms = ["rust"]

# [[context.rules]]
# match = ["*.tsx", "*.jsx"]
# terms = ["typescript", "react"]

# [[context.rules]]
# match = "src/api/**"
# trees = ["docs"]
# terms = ["http", "routing"]
# include = ["docs:api/overview.md"]
